<!DOCTYPE html>
<html>
<head>
    <title>Form Builder</title>

    <link rel="stylesheet" href="style-mnf.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>
<h2>BhoomiTech DynaForm</h2>
<div class="container">

    <!-- LEFT BUILDER PANEL -->
    <div class="builder">

        <h3>Create Form</h3>

        <input id="surveyTitle" placeholder="Form Title" />

        <hr>

        <h4>Add Question</h4>

        <input id="questionText" placeholder="Enter question" />

        <select id="questionType">
            <option value="text">Short Answer</option>
            <option value="textarea">Paragraph</option>
            <option value="date">Date</option>
            <option value="email">Email</option>
            <option value="number">Number</option>
            <option value="phone">Phone Number</option>
            <option value="radio">Multiple Choice</option>
            <option value="checkbox">Checkbox</option>
			<option value="dropdown">Dropdown (Single Select)</option>
            <option value="pagebreak">---- Page Break ----</option>
        </select>

        <!-- Number Range Section -->
        <div id="numberRange" style="display:none;">
            <h5>Number Validation</h5>
            <input id="minValue" placeholder="Minimum Value (optional)" type="number">
            <input id="maxValue" placeholder="Maximum Value (optional)" type="number">
        </div>

        <!-- Date Range Section -->
        <div id="dateRange" style="display:none;">
            <h5>Date Range Validation</h5>
            <input id="minDate" type="date" placeholder="Minimum Date">
            <input id="maxDate" type="date" placeholder="Maximum Date">
        </div>

        <!-- Options textarea -->
        <textarea id="options" style="display:none;"
          placeholder="Options (one per line) â€“ only for MCQ/Checkbox"></textarea>

        <!-- INLINE GROUP 1: Required + Add Question -->
        <div class="inline-row">

            <label class="required-inline">
                <input type="checkbox" id="isRequired"> Required Field
            </label>

            <button onclick="addQuestion()">Add Question</button>

        </div>

        <hr>

        <h4>Layout Options</h4>

        <label>
            <input type="checkbox" id="twoColumn">
            Enable Two Column Layout (HTML Output)
        </label>

        <hr>

        <!-- INLINE GROUP 2: Save JSON + Load JSON -->
        <div class="inline-row">
            <button onclick="saveSurveyJSON()">Save</button>
            <input type="file" accept=".json" onchange="loadSurveyJSON(event)">
        </div>

        <br>

        <!-- INLINE GROUP 3: Output Buttons -->
        <div class="inline-row">
            <button onclick="generatePreview()">Generate Form</button>
            <button onclick="downloadHTML()">Get HTML Form</button>
            <button onclick="downloadPDF()">Get PDF Form</button>
        </div>

    </div>

    <!-- RIGHT PREVIEW PANEL -->
    <div class="preview">
        <h3>Live Preview</h3>
        <div id="previewArea"></div>
    </div>

</div>

<script src="app-obf.js"></script>

<script>
// Show/hide validation panels based on question type
const questionTypeSelect = document.getElementById("questionType");

questionTypeSelect.addEventListener("change", function() {
    let type = this.value;

    // Show number/date validation
    document.getElementById("numberRange").style.display = (type === "number") ? "block" : "none";
    document.getElementById("dateRange").style.display = (type === "date") ? "block" : "none";

    // Show options box only for dropdown, radio, checkbox
    document.getElementById("options").style.display =
        (type === "radio" || type === "checkbox" || type === "dropdown") ? "block" : "none";
});

// Trigger change on page load to initialize display correctly
questionTypeSelect.dispatchEvent(new Event('change'));
</script>

</body>
</html>
